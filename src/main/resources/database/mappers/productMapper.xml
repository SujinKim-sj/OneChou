<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
<mapper namespace="com.onechou.shop.product.ProductDAO">

	<insert id="add" parameterType="ProductDTO">
		<selectKey keyProperty="num" order="BEFORE" resultType="Long">
			SELECT PRODUCT_SEQ.NEXTVAL FROM DUAL
		</selectKey>
		INSERT INTO PRODUCT (NUM, NAME, INFO, PRICE, PURCHASE, REGDATE, ROASTERYNUM)
		VALUES (#{num}, #{name}, #{info}, #{price}, 0, SYSDATE, 1)
	</insert>
	
	<insert id="addFeature" parameterType="ProductFeatureDTO">
		<selectKey keyProperty="num" order="BEFORE" resultType="Long">
			SELECT PRODUCTFEATURE_SEQ.NEXTVAL FROM DUAL
		</selectKey>
		INSERT INTO PRODUCTFEATURE (NUM, ROASTINGPOINT, FLAVOR, PRODUCTNUM)
		VALUES (#{num}, #{roastingPoint}, #{flavor}, #{productNum})
	</insert>
	
	<insert id="addCupnote" parameterType="ProductCupnoteDTO">
		INSERT INTO PRODUCTCUPNOTE (NUM, NOTENAME, FEATURENUM)
		VALUES (PRODUCTCUPNOTE_SEQ.NEXTVAL, #{noteName}, #{featureNum})
	</insert>
	
	<insert id="addFile" parameterType="ProductFileDTO">
		INSERT INTO PRODUCTFILE (FILENUM, FILENAME, ORINAME, PRODUCTNUM)
		VALUES (PRODUCTFILE_SEQ.NEXTVAL, #{fileName}, #{oriName}, #{productNum})
	</insert>
	
	<insert id="addOption" parameterType="ProductOptionDTO">
		INSERT INTO PRODUCTOPTION (NUM, OPTIONNAME, ADDPRICE, PRODUCTNUM)
		VALUES (PRODUCTOPTION_SEQ.NEXTVAL, #{optionName}, #{addPrice}, #{productNum})
	</insert>
	
</mapper>